<VirtualHost *:80>
    ServerName moon.server
    WSGIScriptAlias / /opt/stack/moonwebview/moonwebview/server/wsgi.py
    WSGIDaemonProcess moonwebview user=vagrant group=vagrant processes=3 threads=10 home=/opt/stack/moonwebview display-name=%{GROUP}
    WSGIApplicationGroup %{GLOBAL}

    SetEnv APACHE_RUN_USER vagrant
    SetEnv APACHE_RUN_GROUP vagrant
    WSGIProcessGroup moonwebview

    DocumentRoot /opt/stack/moonwebview/.blackhole/
    Alias /media /opt/stack/moonwebview/media
    Alias /static /opt/stack/moonwebview/static

    RedirectMatch "^/$" "/moon/"

    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>

    <Directory /opt/stack/moonwebview/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        # Apache 2.4 uses mod_authz_host for access control now (instead of
        #  "Allow")
        <IfVersion < 2.4>
            Order allow,deny
            Allow from all
        </IfVersion>
        <IfVersion >= 2.4>
            Require all granted
        </IfVersion>
    </Directory>
    <IfVersion >= 2.4>
      ErrorLogFormat "%{cu}t %M"
    </IfVersion>
    ErrorLog /var/log/apache2/moonwebview_error.log
    LogLevel debug
    CustomLog /var/log/apache2/moonwebview_access.log combined
</VirtualHost>

WSGISocketPrefix /var/run/apache2
