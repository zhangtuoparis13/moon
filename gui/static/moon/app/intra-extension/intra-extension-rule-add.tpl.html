<div ng-controller="IntraExtensionAddRuleController as add" class="modal" tabindex="-1" role="modalAddRule">

	<div class="modal-dialog">

		<div class="modal-content">

			<div class="modal-header">
				<button type="button" class="close" ng-click="$hide()">&times;</button>
				<h4 class="modal-title" translate="moon.intraExtension.rule.add.title"></h4>
			</div>
			
			<div class="modal-body">
			
				<div class="row">
					<div class="col-md-12">
						<h1 class="pull-left" translate="moon.intraExtension.rule.add.form.subject.subject">Subjects</h1>
					</div>
				</div>
				
				<div class="panel-group top10">
	
					<div class="panel panel-default">
					
						<div class="panel-heading">
						
							<div class="row">
								<div class="col-md-5"><label translate="moon.intraExtension.rule.add.form.subject.category">Subject Categories</label></div>
								<div class="col-md-5 col-md-offset-1"><label translate="moon.intraExtension.rule.add.form.subject.categoryValue">Subject Values</label></div>
							</div>
							
						</div>
					
						<div class="panel-body">
						
							<div class="col-md-5">
								<ui-select ng-model="add.subjectCategory.selected" name="subjectCategory" ng-change="add.subjectCategoryValue.reset()"> 
									<ui-select-match placeholder="(None)" ng-bind="$select.selected.name"></ui-select-match>
						           	<ui-select-choices repeat="category in add.subjectCategory.list">
						           		<div ng-bind="category.name" ng-value="category"></div>
					   				</ui-select-choices>
								</ui-select>
							</div>
							
							<div class="col-md-5 col-md-offset-1">
							
								<div class="row">
								
									<div class="col-md-7">
							
										<ui-select ng-model="add.subjectCategoryValue.selected" ng-disabled="disabled" name="subjectCategoryValue">
											<ui-select-match placeholder="(None)" ng-bind="$select.selected"></ui-select-match>
											<ui-select-choices repeat="value in add.subjectCategory.selected.values">
												<div ng-bind="value" ng-value="value"></div>
											</ui-select-choices>
										</ui-select>
									
									</div>
									
									<div class="col-md-4 col-md-offset-1">
						
										<div>
											<a href="" ng-click="add.addSubjectRelation()" class="btn btn-warning" ng-disabled="!add.canAddSubjectRelation()">
								            	<span class="glyphicon glyphicon-link"></span>
								                <span translate="moon.intraExtension.rule.add.form.subject.action.add">Add</span>
											</a>
										</div>
								
									</div>
								
								</div>
								
							</div>
						
						</div>
						
						<ul class="list-group" ng-if="add.hasSubjectRelations()">
						
							<li class="list-group-item" ng-repeat="relation in add.rule.subjects">
								<div class="row">
									<div class="col-md-5">{{relation.name}}</div>
									<div class="col-md-5 col-md-offset-1">
										<div class="row">
											<div class="col-md-7">
												{{relation.value}}
											</div>
											<div class="col-md-5">
												<a href="" ng-click="add.deleteSubjectRelation(relation)">
													<span class="glyphicon glyphicon-trash"></span> <em translate="moon.intraExtension.rule.add.form.object.action.delete">Delete</em>
												</a>
											</div>
										</div>
									</div>
								</div>
							</li>
						
						</ul>
						
					</div>
					
				</div>
				
				<div class="row">
					<div class="col-md-12">
						<h1 class="pull-left" translate="moon.intraExtension.rule.add.form.object.object">Objects</h1>
					</div>
				</div>
				
				<div class="panel-group top10">
	
					<div class="panel panel-default">
					
						<div class="panel-heading">
						
							<div class="row">
								<div class="col-md-5"><label translate="moon.intraExtension.rule.add.form.object.category">Object Categories</label></div>
								<div class="col-md-5 col-md-offset-1"><label translate="moon.intraExtension.rule.add.form.object.categoryValue">Object Values</label></div>
							</div>
							
						</div>
					
						<div class="panel-body">
						
							<div class="col-md-5">
								<ui-select ng-model="add.objectCategory.selected" name="objectCategory" ng-change="add.objectCategoryValue.reset()"> 
									<ui-select-match placeholder="(None)" ng-bind="$select.selected.name"></ui-select-match>
						           	<ui-select-choices repeat="category in add.objectCategory.list">
						           		<div ng-bind="category.name" ng-value="category"></div>
						   				</ui-select-choices>
								</ui-select>
							</div>
							
							<div class="col-md-5 col-md-offset-1">
							
								<div class="row">
								
									<div class="col-md-7">
							
										<ui-select ng-model="add.objectCategoryValue.selected" ng-disabled="disabled" name="objectCategoryValue">
											<ui-select-match placeholder="(None)" ng-bind="$select.selected"></ui-select-match>
											<ui-select-choices repeat="value in add.objectCategory.selected.values">
												<div ng-bind="value" ng-value="value"></div>
											</ui-select-choices>
										</ui-select>
										
									</div>
									
									<div class="col-md-4 col-md-offset-1">
						
										<div>
											<a href="" ng-click="add.addObjectRelation()" class="btn btn-warning" ng-disabled="!add.canAddObjectRelation()">
								            	<span class="glyphicon glyphicon-link"></span>
								                <span translate="moon.intraExtension.rule.add.form.object.action.add">Add</span>
											</a>
										</div>
								
									</div>
									
								</div>
								
							</div>
						
						</div>
						
						<ul class="list-group" ng-if="add.hasObjectRelations()">
						
							<li class="list-group-item" ng-repeat="relation in add.rule.objects">
								<div class="row">
									<div class="col-md-5">{{relation.name}}</div>
									<div class="col-md-5 col-md-offset-1">
										<div class="row">
											<div class="col-md-7">
												{{relation.value}}
											</div>
											<div class="col-md-5">
												<a href="" ng-click="add.deleteObjectRelation(relation)">
													<span class="glyphicon glyphicon-trash"></span> <em translate="moon.intraExtension.rule.add.form.object.action.delete">Delete</em>
												</a>
											</div>
										</div>
									</div>
								</div>
							</li>
						
						</ul>
						
					</div>
					
				</div>
				
			</div>
			
			<div class="modal-footer">
				<div class="btn-toolbar" style="float: right;">
					<a href="" ng-click="$hide()" class="btn btn-default">
		                <span translate="moon.intraExtension.rule.add.action.cancel">Cancel</span>
					</a>					
					<a href="" ng-click="add.create()" class="btn btn-warning" ng-disabled="!add.canCreateRule()">
		            	<span class="glyphicon glyphicon-save"></span>
		                <span translate="moon.intraExtension.rule.add.action.create">Create</span>
					</a>
				</div>
			</div>
			
		</div>
		
	</div>
	
</div>